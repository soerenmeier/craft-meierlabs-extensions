{"version":3,"file":"main-BV4S4BsD.js","sources":["../../js/cke.js","../../js/linkfield.js","../../js/matrix.js","../../main.js"],"sourcesContent":["export function initCkeHiddenList() {\n\tdocument.body.classList.add('mle-cke-hidden-list');\n}\n\nexport function initCkeFontSizes() {\n\tdocument.body.classList.add('mle-cke-font-sizes');\n}\n","export function initLinkFieldCompact() {\n\tdocument.body.classList.add('mle-link-field-compact');\n}\n","export function initUngroupMatrixButtons() {\n\tif (!Garnish || !Garnish.DisclosureMenu) return;\n\n\t// Hook disclosure creation so when Craft builds the menu, we can inline the Ungroup one.\n\tconst origDisclosureInit = Garnish.DisclosureMenu.prototype.init;\n\tGarnish.DisclosureMenu.prototype.init = function (...args) {\n\t\torigDisclosureInit.apply(this, args);\n\t\tinlineOnlyUngroupMenu(this);\n\t};\n}\n\nfunction inlineOnlyUngroupMenu(disclosureMenu) {\n\tconst $trigger = disclosureMenu.$trigger;\n\tconst $container = disclosureMenu.$container;\n\tif (!$trigger || !$container) return;\n\n\t// Only Matrix \"add\" buttons live in \".matrix-field > .buttons\"\n\tconst $buttonsRow = $trigger.closest('.matrix-field > .buttons');\n\tif (!$buttonsRow.length) return;\n\n\tconst triggerLabel = $trigger.find('.label').first().text().trim();\n\t// ignore triggers which don't have the label ungroup\n\tif (triggerLabel !== 'ungroup') return;\n\n\t// Prevent double-init\n\tconst triggerEl = $trigger[0];\n\tif (triggerEl._matrixInlineUngroupInitialized) return;\n\ttriggerEl._matrixInlineUngroupInitialized = true;\n\n\t// Menu items for entry types are buttons with data-type\n\tconst $menuButtons = $container.find('button[data-type]');\n\tif (!$menuButtons.length) return;\n\n\t// Hide original menu trigger\n\t$trigger.hide();\n\n\tconst triggerInBtnGroup = $trigger.closest('.btngroup').length > 0;\n\n\t// add a button group around the trigger\n\tif (!triggerInBtnGroup) {\n\t\tconst $btnGroup = $('<div class=\"btngroup\" />');\n\t\t$btnGroup.insertBefore($trigger);\n\t\t$btnGroup.append($trigger);\n\t\t$trigger.addClass('btngroup-btn-first');\n\t}\n\n\tconst triggerWasFirst = $trigger.hasClass('btngroup-btn-first');\n\n\tconst $proxyButtons = $menuButtons.map((idx, btn) => {\n\t\tconst $orig = $(btn).clone();\n\t\t$orig.attr('id', $orig.attr('id') + '-clone');\n\t\t$orig.attr('class', 'btn dashed');\n\n\t\tconsole.log('idx', idx);\n\n\t\tif (idx === 0 && triggerWasFirst) {\n\t\t\t$orig.addClass('btngroup-btn-first icon add');\n\t\t\t$orig.find('.icon').remove();\n\t\t}\n\n\t\tif ($orig.find('.icon').length) {\n\t\t\t$orig.addClass('mle-btn-icon');\n\t\t}\n\n\t\treturn $orig.get(0);\n\t});\n\n\t$($proxyButtons).insertAfter($trigger);\n}\n","import './style.scss';\n\nimport { initCkeFontSizes, initCkeHiddenList } from './js/cke';\nimport { initLinkFieldCompact } from './js/linkfield';\nimport { initUngroupMatrixButtons } from './js/matrix';\n\nasync function main() {\n\tconst settings = window.meierlabsExtensions;\n\tif (settings?.ckeHiddenList) initCkeHiddenList();\n\tif (settings?.ckeFontSizes) initCkeFontSizes();\n\tif (settings?.linkFieldCompact) initLinkFieldCompact();\n\tif (settings?.ungroupMatrixButtons) initUngroupMatrixButtons();\n}\nmain();\n"],"names":["initCkeHiddenList","initCkeFontSizes","initLinkFieldCompact","initUngroupMatrixButtons","origDisclosureInit","args","inlineOnlyUngroupMenu","disclosureMenu","$trigger","$container","triggerEl","$menuButtons","$btnGroup","triggerWasFirst","$proxyButtons","idx","btn","$orig","main","settings"],"mappings":"AAAO,SAASA,GAAoB,CACnC,SAAS,KAAK,UAAU,IAAI,qBAAqB,CAClD,CAEO,SAASC,GAAmB,CAClC,SAAS,KAAK,UAAU,IAAI,oBAAoB,CACjD,CCNO,SAASC,GAAuB,CACtC,SAAS,KAAK,UAAU,IAAI,wBAAwB,CACrD,CCFO,SAASC,GAA2B,CAC1C,GAAI,CAAC,SAAW,CAAC,QAAQ,eAAgB,OAGzC,MAAMC,EAAqB,QAAQ,eAAe,UAAU,KAC5D,QAAQ,eAAe,UAAU,KAAO,YAAaC,EAAM,CAC1DD,EAAmB,MAAM,KAAMC,CAAI,EACnCC,EAAsB,IAAI,CAC3B,CACD,CAEA,SAASA,EAAsBC,EAAgB,CAC9C,MAAMC,EAAWD,EAAe,SAC1BE,EAAaF,EAAe,WASlC,GARI,CAACC,GAAY,CAACC,GAId,CADgBD,EAAS,QAAQ,0BAA0B,EAC9C,QAEIA,EAAS,KAAK,QAAQ,EAAE,MAAK,EAAG,KAAI,EAAG,KAAI,IAE3C,UAAW,OAGhC,MAAME,EAAYF,EAAS,CAAC,EAC5B,GAAIE,EAAU,gCAAiC,OAC/CA,EAAU,gCAAkC,GAG5C,MAAMC,EAAeF,EAAW,KAAK,mBAAmB,EACxD,GAAI,CAACE,EAAa,OAAQ,OAQ1B,GALAH,EAAS,KAAI,EAKT,EAHsBA,EAAS,QAAQ,WAAW,EAAE,OAAS,GAGzC,CACvB,MAAMI,EAAY,EAAE,0BAA0B,EAC9CA,EAAU,aAAaJ,CAAQ,EAC/BI,EAAU,OAAOJ,CAAQ,EACzBA,EAAS,SAAS,oBAAoB,CACvC,CAEA,MAAMK,EAAkBL,EAAS,SAAS,oBAAoB,EAExDM,EAAgBH,EAAa,IAAI,CAACI,EAAKC,IAAQ,CACpD,MAAMC,EAAQ,EAAED,CAAG,EAAE,MAAK,EAC1B,OAAAC,EAAM,KAAK,KAAMA,EAAM,KAAK,IAAI,EAAI,QAAQ,EAC5CA,EAAM,KAAK,QAAS,YAAY,EAEhC,QAAQ,IAAI,MAAOF,CAAG,EAElBA,IAAQ,GAAKF,IAChBI,EAAM,SAAS,6BAA6B,EAC5CA,EAAM,KAAK,OAAO,EAAE,OAAM,GAGvBA,EAAM,KAAK,OAAO,EAAE,QACvBA,EAAM,SAAS,cAAc,EAGvBA,EAAM,IAAI,CAAC,CACnB,CAAC,EAED,EAAEH,CAAa,EAAE,YAAYN,CAAQ,CACtC,CC9DA,eAAeU,GAAO,CACrB,MAAMC,EAAW,OAAO,oBACpBA,GAAU,eAAenB,EAAiB,EAC1CmB,GAAU,cAAclB,EAAgB,EACxCkB,GAAU,kBAAkBjB,EAAoB,EAChDiB,GAAU,sBAAsBhB,EAAwB,CAC7D,CACAe,EAAI"}